- name: Install pipx packages
  become: false  # Run as the user, not root
  shell: pipx install {{ item }}
  loop: "{{ pipx_packages }}"
  args:
    executable: /bin/bash
  environment:
    PATH: "{{ ansible_env.PATH }}:/home/{{ lookup('env', 'USER') }}/.local/bin:/home/linuxbrew/.linuxbrew/bin:/home/{{ ansible_env.SUDO_USER }}/.nix-profile/bin:{{ ansible_env.HOME }}/.nix-profile/bin"
    PIPX_BIN_DIR: "/home/{{ lookup('env', 'USER') }}/.local/bin"
    PIPX_HOME: "/home/{{ lookup('env', 'USER') }}/.local/pipx"
